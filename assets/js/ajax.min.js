jQuery(document).ready(function(s){s(".st-sticky-note-wrapper div.overlay").on("click",function(t){t.preventDefault(),tinymce.triggerSave();var e=s("#st-title").val(),o=s("#st-content").val(),t=s("#st_sticky_note_create_nonce_field").val();0!==e.length&&s.ajax({type:"POST",dataType:"json",url:st_sticky_note.ajaxurl,data:{action:"st_sticky_note_insert",title:e,content:o,nonce:t},error:function(t,e,o){console.log("The following error occured: "+e,o)},success:function(t){"success"==t&&(s("form#st-sticky-note-form").trigger("reset"),s.post({dataType:"html",url:st_sticky_note.ajaxurl,data:{action:"st_sticky_note_new_added"},error:function(t,e,o){console.log("The following error occured: "+e,o)},success:function(t){s(".st-sticky-note").prepend(t),s(".st-sticky-note-wrapper").removeClass("open").addClass("close"),s(".st-sticky-note").imagesLoaded(function(){s(".st-sticky-note").packery("appended",".grid-item").packery("reloadItems").packery("layout")})}}))}})}),s(document).on("dblclick",".st-sticky-note article.grid-item",function(){var t=s(this).data("id"),e=s(this).find("h4.entry-title").html(),o=s(this).find("div.entry-content").html();s.post({dataType:"html",url:st_sticky_note.ajaxurl,data:{action:"st_sticky_note_update_form",id:t,title:e,content:o},error:function(t,e,o){console.log("The following error occured: "+e,o)},success:function(t){0!=t&&(s(".st-sticky-note-wrapper").prepend(t),tinymce.execCommand("mceRemoveEditor",!1,"st-update-content"),tinymce.execCommand("mceAddEditor",!1,"st-update-content"),s(".st-sticky-note-wrapper").removeClass("close").addClass("update-open"))}})}),s(".st-sticky-note-wrapper div.update-overlay").on("click",function(t){t.preventDefault(),tinymce.triggerSave();var o=s("#st-update-id").val(),e=s("#st-update-title").val(),n=s("#st-update-content").val(),t=s("#st_sticky_note_create_nonce_field").val();void 0!==o&&0!==o.length&&s.ajax({type:"POST",dataType:"json",url:st_sticky_note.ajaxurl,data:{action:"st_sticky_note_update",id:o,title:e,content:n,nonce:t},error:function(t,e,o){console.log("The following error occured: "+e,o)},success:function(t){"success"==t&&s.post({dataType:"html",url:st_sticky_note.ajaxurl,data:{action:"st_sticky_note_updated_post",id:o},error:function(t,e,o){console.log("The following error occured: "+e,o)},success:function(t){var e=s('.st-sticky-note-item[data-id="'+o+'"]').prev("article");s('.st-sticky-note-item[data-id="'+o+'"]').remove(),e.length?e.after(t):s(".st-sticky-note").prepend(t),s(".st-sticky-note-wrapper").removeClass("update-open").addClass("close"),s("#st-sticky-note-update-form").remove(),s(".st-sticky-note").imagesLoaded(function(){s(".st-sticky-note").packery("appended",".grid-item").packery("reloadItems").packery("layout")})}})}})}),s(document).on("click","#st-sticky-note-delete",function(t){var e;t.preventDefault(),!0===confirm(st_sticky_note.delete_confirm)&&(e=s(this).data("id"),t=s("#st_sticky_note_create_nonce_field").val(),s.ajax({type:"POST",dataType:"json",url:st_sticky_note.ajaxurl,data:{action:"st_sticky_note_delete",id:e,nonce:t},error:function(t,e,o){console.log("The following error occured: "+e,o)},success:function(t){"success"==t&&(s('.st-sticky-note-item[data-id="'+e+'"]').remove(),s(".st-sticky-note-wrapper").removeClass("update-open").addClass("close"),s("#st-sticky-note-update-form").remove(),s(".st-sticky-note").imagesLoaded(function(){s(".st-sticky-note").packery("reloadItems").packery("layout")}))}}))})});